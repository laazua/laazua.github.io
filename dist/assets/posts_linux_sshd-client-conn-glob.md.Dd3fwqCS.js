import{_ as n,c as a,o as p,af as e}from"./chunks/framework.BKhkn9_V.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"posts/linux/sshd-client-conn-glob.md","filePath":"posts/linux/sshd-client-conn-glob.md"}'),l={name:"posts/linux/sshd-client-conn-glob.md"};function i(c,s,t,o,r,h){return p(),a("div",null,[...s[0]||(s[0]=[e(`<h5 id="ssh客户端全局配置" tabindex="-1">ssh客户端全局配置 <a class="header-anchor" href="#ssh客户端全局配置" aria-label="Permalink to “ssh客户端全局配置”">​</a></h5><p>/etc/ssh/ssh_config - SSH 客户端配置<br> 作用：配置 SSH 客户端的行为，影响所有用户使用 ssh 命令时的默认设置<br> 一般在 /etc/ssh/ssh_config.d 目录下进行配置</p><ul><li><strong>配置选项</strong></li></ul><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span># 引入自定义配置</span></span>
<span class="line"><span>Include /etc/ssh/ssh_config.d/*.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 主机配置</span></span>
<span class="line"><span>Host pattern                    # 主机匹配模式，支持通配符 * ?</span></span>
<span class="line"><span>HostName hostname              # 实际的主机名或IP地址</span></span>
<span class="line"><span>Port 22                        # 连接端口</span></span>
<span class="line"><span>User username                  # 登录用户名</span></span>
<span class="line"><span>AddressFamily any              # 地址族：any, inet(IPv4), inet6(IPv6)</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 认证方法</span></span>
<span class="line"><span>PreferredAuthentications publickey,password,keyboard-interactive # 认证方法优先级</span></span>
<span class="line"><span>PubkeyAuthentication yes       # 是否使用公钥认证</span></span>
<span class="line"><span>PasswordAuthentication yes     # 是否使用密码认证</span></span>
<span class="line"><span>ChallengeResponseAuthentication yes # 挑战应答认证</span></span>
<span class="line"><span>KbdInteractiveAuthentication yes # 键盘交互认证</span></span>
<span class="line"><span>GSSAPIAuthentication no        # GSSAPI认证</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 密钥管理</span></span>
<span class="line"><span>IdentityFile ~/.ssh/id_rsa     # 身份密钥文件路径（可多次指定）</span></span>
<span class="line"><span>IdentitiesOnly no              # 是否只使用指定的IdentityFile</span></span>
<span class="line"><span>CertificateFile ~/.ssh/id_rsa-cert.pub # 证书文件路径</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 主机密钥验证</span></span>
<span class="line"><span>StrictHostKeyChecking ask      # 严格主机密钥检查：yes, no, ask</span></span>
<span class="line"><span>UserKnownHostsFile ~/.ssh/known_hosts # 已知主机文件路径</span></span>
<span class="line"><span>GlobalKnownHostsFile /etc/ssh/ssh_known_hosts # 全局已知主机文件</span></span>
<span class="line"><span>CheckHostIP yes                # 检查已知主机文件中的IP地址</span></span>
<span class="line"><span>HashKnownHosts no              # 哈希已知主机文件</span></span>
<span class="line"><span>HostKeyAlias alias-name        # 主机密钥别名</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 连接管理</span></span>
<span class="line"><span>ConnectTimeout 0               # 连接超时时间（秒）</span></span>
<span class="line"><span>ConnectionAttempts 1           # 连接尝试次数</span></span>
<span class="line"><span>ServerAliveInterval 0          # 服务器活跃检查间隔（秒）</span></span>
<span class="line"><span>ServerAliveCountMax 3          # 服务器活跃检查次数</span></span>
<span class="line"><span>TCPKeepAlive yes               # TCP保持连接</span></span>
<span class="line"><span>ExitOnForwardFailure no        # 转发失败时是否退出</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 性能优化</span></span>
<span class="line"><span>Compression yes                # 是否压缩数据</span></span>
<span class="line"><span>CompressionLevel 6             # 压缩级别（1-9）</span></span>
<span class="line"><span>IPQoS lowdelay throughput      # IP服务质量</span></span>
<span class="line"><span>RekeyLimit 1G 1h              # 重新密钥限制</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 代理设置</span></span>
<span class="line"><span>ForwardAgent no                # SSH代理转发</span></span>
<span class="line"><span>ForwardX11 no                  # X11转发</span></span>
<span class="line"><span>ForwardX11Trusted no           # 可信X11转发</span></span>
<span class="line"><span>XAuthLocation /usr/bin/xauth  # xauth程序路径</span></span>
<span class="line"><span># 代理设置</span></span>
<span class="line"><span>ProxyCommand ssh -W %h:%p gateway.example.com # 代理命令</span></span>
<span class="line"><span>ProxyJump user@jump-host       # 跳板机代理</span></span>
<span class="line"><span>ProxyUseFdpass no              # 代理使用文件描述符传递</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 绑定地址</span></span>
<span class="line"><span>BindAddress address            # 绑定本地地址</span></span>
<span class="line"><span>BindInterface interface        # 绑定网络接口</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 本地转发</span></span>
<span class="line"><span>LocalForward [bind_address:]port host:hostport # 本地端口转发</span></span>
<span class="line"><span>RemoteForward [bind_address:]port host:hostport # 远程端口转发</span></span>
<span class="line"><span>DynamicForward [bind_address:]port # 动态端口转发（SOCKS代理）</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 连接控制</span></span>
<span class="line"><span>ControlMaster auto             # 控制主连接：auto, autoask, yes, no</span></span>
<span class="line"><span>ControlPath ~/.ssh/master-%r@%h:%p # 控制套接字路径</span></span>
<span class="line"><span>ControlPersist 10m             # 控制连接保持时间</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 协议版本</span></span>
<span class="line"><span>Protocol 2                     # SSH协议版本</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 加密算法</span></span>
<span class="line"><span>Ciphers aes256-ctr,aes192-ctr,aes128-ctr # 加密算法列表</span></span>
<span class="line"><span>MACs hmac-sha2-512,hmac-sha2-256 # 消息认证码算法</span></span>
<span class="line"><span>HostKeyAlgorithms ssh-ed25519,ssh-rsa,ssh-dss # 主机密钥算法</span></span>
<span class="line"><span>KexAlgorithms diffie-hellman-group-exchange-sha256 # 密钥交换算法</span></span>
<span class="line"><span></span></span>
<span class="line"><span># GSSAPI配置</span></span>
<span class="line"><span>GSSAPIDelegateCredentials no   # 委托GSSAPI凭据</span></span>
<span class="line"><span>GSSAPIKeyExchange no           # GSSAPI密钥交换</span></span>
<span class="line"><span>GSSAPIClientIdentity identity  # GSSAPI客户端身份</span></span>
<span class="line"><span>GSSAPIRenewalForcesRekey no    # GSSAPI续订强制重新密钥</span></span>
<span class="line"><span>GSSAPITrustDns no             # 信任DNS获取GSSAPI主体</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 杂项设置</span></span>
<span class="line"><span>SendEnv LANG LC_*              # 发送环境变量</span></span>
<span class="line"><span>SetEnv VAR=value               # 设置环境变量</span></span>
<span class="line"><span>Tunnel device                  # 隧道设备</span></span>
<span class="line"><span>TunnelPointToPoint no          # 点对点隧道</span></span>
<span class="line"><span>UseKeychain no                 # 使用钥匙链（macOS）</span></span>
<span class="line"><span>UseRoaming no                  # 使用漫游功能</span></span>
<span class="line"><span>VerifyHostKeyDNS no            # 通过DNS验证主机密钥</span></span>
<span class="line"><span>VisualHostKey no               # 可视化主机密钥</span></span>
<span class="line"><span>CanonicalDomains              # 规范域名</span></span>
<span class="line"><span>CanonicalizeFallbackLocal yes  # 规范化回退到本地</span></span>
<span class="line"><span>CanonicalizeHostname no        # 规范主机名</span></span>
<span class="line"><span>CanonicalizeMaxDots 1          # 规范最大点数</span></span>
<span class="line"><span>CanonicalizePermittedCNAMEs    # 允许的CNAME规范</span></span></code></pre></div><ul><li><strong>客户端配置示例</strong></li></ul><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span># 全局默认配置</span></span>
<span class="line"><span>Host *</span></span>
<span class="line"><span>    # 基本设置</span></span>
<span class="line"><span>    Port 22</span></span>
<span class="line"><span>    AddressFamily any</span></span>
<span class="line"><span>    ConnectTimeout 30</span></span>
<span class="line"><span>    Protocol 2</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    # 认证设置</span></span>
<span class="line"><span>    PreferredAuthentications publickey,password</span></span>
<span class="line"><span>    PubkeyAuthentication yes</span></span>
<span class="line"><span>    PasswordAuthentication yes</span></span>
<span class="line"><span>    StrictHostKeyChecking ask</span></span>
<span class="line"><span>    UserKnownHostsFile ~/.ssh/known_hosts</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    # 性能优化</span></span>
<span class="line"><span>    Compression yes</span></span>
<span class="line"><span>    ServerAliveInterval 60</span></span>
<span class="line"><span>    ServerAliveCountMax 3</span></span>
<span class="line"><span>    TCPKeepAlive yes</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    # 安全设置</span></span>
<span class="line"><span>    ForwardAgent no</span></span>
<span class="line"><span>    ForwardX11 no</span></span>
<span class="line"><span>    IdentitiesOnly no</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    # 加密算法</span></span>
<span class="line"><span>    Ciphers aes256-ctr,aes192-ctr,aes128-ctr</span></span>
<span class="line"><span>    MACs hmac-sha2-512,hmac-sha2-256</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 特定服务器配置</span></span>
<span class="line"><span>Host webserver</span></span>
<span class="line"><span>    HostName 192.168.1.100</span></span>
<span class="line"><span>    User admin</span></span>
<span class="line"><span>    Port 2222</span></span>
<span class="line"><span>    IdentityFile ~/.ssh/web_server_key</span></span>
<span class="line"><span>    IdentitiesOnly yes</span></span>
<span class="line"><span></span></span>
<span class="line"><span># GitHub配置</span></span>
<span class="line"><span>Host github.com</span></span>
<span class="line"><span>    User git</span></span>
<span class="line"><span>    IdentityFile ~/.ssh/github_key</span></span>
<span class="line"><span>    IdentitiesOnly yes</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 通过跳板机连接</span></span>
<span class="line"><span>Host internal-*</span></span>
<span class="line"><span>    ProxyJump jumpuser@bastion.example.com:2222</span></span>
<span class="line"><span>    ServerAliveInterval 30</span></span>
<span class="line"><span>    ServerAliveCountMax 5</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 公司网络配置</span></span>
<span class="line"><span>Host *.company.com</span></span>
<span class="line"><span>    User corporate-user</span></span>
<span class="line"><span>    GSSAPIAuthentication yes</span></span>
<span class="line"><span>    GSSAPIDelegateCredentials yes</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 连接复用配置</span></span>
<span class="line"><span>Host frequently-used</span></span>
<span class="line"><span>    ControlMaster auto</span></span>
<span class="line"><span>    ControlPath ~/.ssh/cm-%r@%h:%p</span></span>
<span class="line"><span>    ControlPersist 1h</span></span></code></pre></div><ul><li><strong>查看客户端主机配置项</strong></li></ul><blockquote><p>ssh -G hostname</p></blockquote>`,8)])])}const y=n(l,[["render",i]]);export{u as __pageData,y as default};
